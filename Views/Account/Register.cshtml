@model RealTimeChatMVC.Models.User
@{
    ViewData["Title"] = "Đăng Ký";
}
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@500;700;800&display=swap" rel="stylesheet">
<style>
    .login-wrapper {
        font-family: 'Quicksand', sans-serif;
        height: 100vh;
        display: flex; justify-content: center; align-items: center;
        padding-top: 50px; overflow: hidden;
    }
    .glass-card {
        background: rgba(255, 255, 255, 0.98);
        backdrop-filter: blur(20px);
        padding: 30px 40px;
        border-radius: 25px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
        width: 100%; max-width: 400px; text-align: center;
    }
    .form-control {
        border-radius: 50px; padding: 10px 20px; background: #f4f7f6; border: 2px solid #eaeff2;
        font-weight: 600; margin-bottom: 15px;
    }
    .form-control:focus { background: white; border-color: #FC466B; outline: none; }
    .btn-submit {
        width: 100%; padding: 12px; border-radius: 50px;
        background: linear-gradient(135deg, #FC466B 0%, #3F5EFB 100%);
        border: none; color: white; font-weight: 800; text-transform: uppercase;
        cursor: pointer; transition: 0.3s;
    }
    .btn-submit:hover { transform: translateY(-3px); box-shadow: 0 10px 25px rgba(252, 70, 107, 0.5); }

    /* --- NEW PASSWORD STYLE --- */
    .password-container { position: relative; width: 100%; margin-bottom: 15px; }
    .btn-toggle-pass {
        position: absolute; right: 15px; top: 50%; transform: translateY(-50%);
        background: none; border: none; cursor: pointer; color: #666;
        display: flex; align-items: center; justify-content: center; padding: 5px;
        transition: color 0.2s; opacity: 0.6;
    }
    .btn-toggle-pass:hover { color: #FC466B; opacity: 1; }
    .eye-icon { width: 20px; height: 20px; }
    
    /* Ghi đè margin-bottom của form-control bên trong container */
    .password-container .form-control { margin-bottom: 0; padding-right: 45px; }
</style>
<div class="login-wrapper">
    <div class="glass-card">
        <h2 style="color:#FC466B; font-weight:900; margin-bottom:20px">Tạo Tài Khoản</h2>
        @if (ViewBag.Error != null) { <div class="alert alert-danger">@ViewBag.Error</div> }
        <form method="post">
            <input asp-for="Username" class="form-control" placeholder="Tên đăng nhập" required />
            <input asp-for="FullName" class="form-control" placeholder="Họ và tên hiển thị" required />
            
            <div class="password-container">
                <input asp-for="Password" type="password" class="form-control" placeholder="Mật khẩu" required />
                <button type="button" class="btn-toggle-pass" onclick="togglePassword(this)">
                    <svg class="eye-icon eye-open" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z" fill="currentColor"/></svg>
                    <svg class="eye-icon eye-closed" style="display:none" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.83 9L15 12.17C15 12.11 15 12.06 15 12C15 10.34 13.66 9 12 9C11.94 9 11.89 9 11.83 9ZM19.78 22.61L17.17 20C15.65 20.97 13.9 21.5 12 21.5C7 21.5 2.73 18.39 1 14C2.33 10.63 5.09 8.08 8.47 7L1.39 0.42L2.8 0L21.19 21.19L19.78 22.61ZM15.04 17.87L9.96 12.79C9.97 12.86 10 12.93 10 13C10 14.66 11.34 16 13 16C13.07 16 13.14 15.99 13.21 15.96L11.86 14.61L12 14.5C13.38 14.5 14.5 13.38 14.5 12L15.04 17.87ZM12 6.5C12.87 6.5 13.69 6.7 14.43 7.05L16.66 9.28C16.88 10.15 17 11.06 17 12C17 12.98 16.78 13.91 16.39 14.75L18.49 16.85C20.06 15.68 21.35 14.07 22.14 12.18C20.69 8.43 17.27 5.86 13.43 5.06C12.97 4.97 12.49 4.92 12 4.92V6.5Z" fill="currentColor"/></svg>
                </button>
            </div>

            <div class="password-container">
                <input name="confirmPassword" type="password" class="form-control" placeholder="Nhập lại mật khẩu" required />
                <button type="button" class="btn-toggle-pass" onclick="togglePassword(this)">
                    <svg class="eye-icon eye-open" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 4.5C7 4.5 2.73 7.61 1 12C2.73 16.39 7 19.5 12 19.5C17 19.5 21.27 16.39 23 12C21.27 7.61 17 4.5 12 4.5ZM12 17C9.24 17 7 14.76 7 12C7 9.24 9.24 7 12 7C14.76 7 17 9.24 17 12C17 14.76 14.76 17 12 17ZM12 9C10.34 9 9 10.34 9 12C9 13.66 10.34 15 12 15C13.66 15 15 13.66 15 12C15 10.34 13.66 9 12 9Z" fill="currentColor"/></svg>
                    <svg class="eye-icon eye-closed" style="display:none" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M11.83 9L15 12.17C15 12.11 15 12.06 15 12C15 10.34 13.66 9 12 9C11.94 9 11.89 9 11.83 9ZM19.78 22.61L17.17 20C15.65 20.97 13.9 21.5 12 21.5C7 21.5 2.73 18.39 1 14C2.33 10.63 5.09 8.08 8.47 7L1.39 0.42L2.8 0L21.19 21.19L19.78 22.61ZM15.04 17.87L9.96 12.79C9.97 12.86 10 12.93 10 13C10 14.66 11.34 16 13 16C13.07 16 13.14 15.99 13.21 15.96L11.86 14.61L12 14.5C13.38 14.5 14.5 13.38 14.5 12L15.04 17.87ZM12 6.5C12.87 6.5 13.69 6.7 14.43 7.05L16.66 9.28C16.88 10.15 17 11.06 17 12C17 12.98 16.78 13.91 16.39 14.75L18.49 16.85C20.06 15.68 21.35 14.07 22.14 12.18C20.69 8.43 17.27 5.86 13.43 5.06C12.97 4.97 12.49 4.92 12 4.92V6.5Z" fill="currentColor"/></svg>
                </button>
            </div>
            
            <button type="submit" class="btn-submit">Đăng Ký</button>
        </form>
        <div style="margin-top:15px; font-weight:700">
            Đã có tài khoản? <a asp-action="Login" style="color:#3F5EFB">Đăng nhập</a>
        </div>
    </div>
</div>

<script>
    function togglePassword(btn) {
        var input = btn.previousElementSibling;
        var eyeOpen = btn.querySelector('.eye-open');
        var eyeClosed = btn.querySelector('.eye-closed');
        
        if (input.type === "password") {
            input.type = "text"; eyeOpen.style.display = "none"; eyeClosed.style.display = "block";
        } else {
            input.type = "password"; eyeOpen.style.display = "block"; eyeClosed.style.display = "none";
        }
    }
</script>